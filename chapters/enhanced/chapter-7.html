<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 7: The Pleroma - Aion by Carl Jung</title>
    <link rel="stylesheet" href="../../assets/css/bundle.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.8.5/d3.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    </head>
<body>
    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-container">
            <a href="../../index.html" class="nav-link">Home</a>
            <a href="../index.html" class="nav-link">Chapters</a>
            <a href="timeline.html" class="nav-link">Timeline</a>
            <a href="symbols.html" class="nav-link">Symbols</a>
            <a href="../../src/about.html" class="nav-link">About</a>
        </div>
    </nav>

    <main class="chapter-content">
        <div class="chapter-header">
            <div class="chapter-number">Chapter VII</div>
            <h1 class="chapter-title">The Pleroma</h1>
            <p class="chapter-subtitle">Gnostic Fullness Containing All Opposites</p>
        </div>

        <section class="chapter-intro">
            <p>Jung explores the Gnostic concept of the Pleroma - the divine fullness that contains all opposites in undifferentiated unity. This represents the state before creation, where all potential exists in perfect balance, neither good nor evil, neither light nor dark.</p>
        </section>

        <!-- Interactive Gnostic Cosmology -->
        <section class="visualization-section">
            <h2>Interactive Gnostic Cosmology</h2>
            <div class="visualization-intro">
                <p>Experience the emanation from the undifferentiated Pleroma through the various levels of creation. Watch as the perfect unity gradually differentiates into the material world.</p>
            </div>
            <div id="gnostic-cosmology" class="visualization-container"></div>
            <div class="visualization-controls">
                <div class="control-group">
                    <button id="start-emanation">Start Emanation</button>
                    <button id="reverse-emanation">Reverse Process</button>
                    <button id="pause-emanation">Pause</button>
                    <button id="reset-cosmology">Reset to Pleroma</button>
                </div>
                <div class="control-group">
                    <label for="emanation-speed">Emanation Speed:</label>
                    <input type="range" id="emanation-speed" min="0.1" max="3" value="1" step="0.1">
                </div>
                <div class="control-group">
                    <button id="show-aeon-names">Show Aeon Names</button>
                    <button id="highlight-sophia">Highlight Sophia's Fall</button>
                    <button id="show-opposites">Show Opposites</button>
                </div>
            </div>
        </section>

        <!-- Sophia's Fall Visualization -->
        <section class="visualization-section">
            <h2>Sophia's Fall and the Creation of Matter</h2>
            <div class="visualization-intro">
                <p>Watch Sophia's dramatic fall from the Pleroma into matter, creating the material world through her desire for knowledge outside the divine unity.</p>
            </div>
            <div id="sophia-fall" class="visualization-container"></div>
            <div class="visualization-controls">
                <button id="play-sophia-fall">Play Sophia's Fall</button>
                <button id="show-demiurge">Show Demiurge Creation</button>
                <button id="highlight-redemption">Show Redemption Path</button>
                <button id="restart-sophia">Restart Sequence</button>
            </div>
        </section>

        <!-- Aeon Hierarchy Viewer -->
        <section class="visualization-section">
            <h2>The Aeon Hierarchy</h2>
            <div class="visualization-intro">
                <p>Explore the complex hierarchy of Aeons (divine emanations) in Gnostic cosmology. Each pair represents complementary aspects of divine consciousness.</p>
            </div>
            <div id="aeon-hierarchy" class="visualization-container"></div>
            <div class="aeon-controls">
                <select id="aeon-selector">
                    <option value="all">All Aeons</option>
                    <option value="bythos">Bythos (Depth)</option>
                    <option value="nous">Nous (Mind)</option>
                    <option value="logos">Logos (Word)</option>
                    <option value="anthropos">Anthropos (Human)</option>
                    <option value="sophia">Sophia (Wisdom)</option>
                </select>
                <button id="animate-hierarchy">Animate Emanations</button>
                <button id="show-syzygy">Show Syzygy Pairs</button>
            </div>
        </section>

        <!-- Pleroma vs Material World -->
        <section class="visualization-section">
            <h2>Pleroma vs Material World</h2>
            <div class="visualization-intro">
                <p>Contrast the perfect unity of the Pleroma with the divided, conflicted nature of the material world. See how Jung relates this to psychological wholeness.</p>
            </div>
            <div id="pleroma-material" class="visualization-container"></div>
            <div class="visualization-controls">
                <button id="toggle-realm">Toggle Between Realms</button>
                <button id="show-psychological">Show Psychological Parallels</button>
                <button id="animate-integration">Animate Integration</button>
            </div>
        </section>

        <!-- Educational Content -->
        <section class="content-section">
            <h2>Gnostic Concepts and Jung's Psychology</h2>
            <div class="concept-grid">
                <div class="concept-card">
                    <h3>The Pleroma</h3>
                    <ul>
                        <li>Undifferentiated divine fullness</li>
                        <li>Contains all opposites in unity</li>
                        <li>State before creation</li>
                        <li>Jung's parallel: The Self before individuation</li>
                    </ul>
                </div>
                <div class="concept-card">
                    <h3>Aeons (Divine Emanations)</h3>
                    <ul>
                        <li>Bythos & Sige (Depth & Silence)</li>
                        <li>Nous & Aletheia (Mind & Truth)</li>
                        <li>Logos & Zoe (Word & Life)</li>
                        <li>Anthropos & Ecclesia (Human & Church)</li>
                    </ul>
                </div>
                <div class="concept-card">
                    <h3>Sophia's Fall</h3>
                    <ul>
                        <li>Desire for knowledge beyond limits</li>
                        <li>Creates material world through error</li>
                        <li>Demiurge as ignorant creator</li>
                        <li>Jung's parallel: Ego's separation from Self</li>
                    </ul>
                </div>
                <div class="concept-card">
                    <h3>Psychological Parallels</h3>
                    <ul>
                        <li>Pleroma = Unconscious wholeness</li>
                        <li>Sophia's fall = Ego development</li>
                        <li>Material world = Conscious suffering</li>
                        <li>Redemption = Individuation process</li>
                    </ul>
                </div>
            </div>
        </section>

        <!-- Jung's Commentary -->
        <section class="content-section">
            <h2>Jung's Interpretation</h2>
            <blockquote class="jung-quote">
                "The Pleroma is the place of fullness, where the opposites are united. It is neither good nor evil, neither light nor dark, but both and neither. The fall of Sophia represents the necessary differentiation that creates consciousness - and with it, suffering."
            </blockquote>
            <p>Jung saw in Gnostic mythology a profound psychological truth: that consciousness emerges through a kind of "fall" from unconscious wholeness, but this apparent loss is necessary for the development of individual awareness and eventual conscious reunion with the Self.</p>
        </section>

        <!-- Navigation -->
        <div class="chapter-nav">
            <a href="chapter-6.html" class="prev-chapter">← Chapter 6: The Antichrist</a>
            <a href="chapter-8.html" class="next-chapter">Chapter 8: Sophia →</a>
        </div>
    </main>

    <style>
        .visualization-container {
            position: relative;
            height: 700px;
            background: var(--surface-glass);
            border-radius: 1rem;
            overflow: hidden;
            margin: 2rem 0;
        }

        .aeon-info {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: rgba(0, 0, 0, 0.8);
            padding: 1rem;
            border-radius: 0.5rem;
            color: white;
            font-size: 0.875rem;
            max-width: 250px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .aeon-info.visible {
            opacity: 1;
        }

        .emanation-level {
            position: absolute;
            left: 1rem;
            top: 1rem;
            background: rgba(107, 70, 193, 0.8);
            padding: 0.5rem 1rem;
            border-radius: 0.25rem;
            color: white;
            font-weight: bold;
        }

        .jung-quote {
            font-style: italic;
            font-size: 1.125rem;
            color: var(--accent);
            border-left: 4px solid var(--accent);
            padding-left: 1rem;
            margin: 2rem 0;
        }

        .aeon-controls {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin: 1rem 0;
            flex-wrap: wrap;
        }

        .aeon-controls select,
        .aeon-controls button {
            padding: 0.5rem 1rem;
            background: var(--surface-glass);
            border: 1px solid var(--border-default);
            color: var(--text-primary);
            border-radius: 0.25rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .aeon-controls button:hover {
            background: var(--accent);
            color: white;
        }

        @media (max-width: 768px) {
            .visualization-container {
                height: 500px;
            }
            
            .aeon-info {
                position: relative;
                top: auto;
                right: auto;
                margin-top: 1rem;
                opacity: 1;
            }
        }
    </style>

    <script>
        // Initialize visualization loader
        const vizLoader = new VisualizationLoader();
        
        // Gnostic Cosmology Visualization
        vizLoader.lazyLoad('gnostic-cosmology', function(container) {
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, container.offsetWidth / container.offsetHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
            
            renderer.setSize(container.offsetWidth, container.offsetHeight);
            renderer.setClearColor(0x000000, 0);
            container.appendChild(renderer.domElement);

            camera.position.set(0, 0, 15);

            // Gnostic cosmology data
            const cosmologyLevels = [
                { 
                    name: "Pleroma", 
                    distance: 0, 
                    size: 2, 
                    color: 0xFFFFFF, 
                    description: "The undifferentiated divine fullness"
                },
                { 
                    name: "Bythos & Sige", 
                    distance: 3, 
                    size: 1.5, 
                    color: 0xFFD700, 
                    description: "Depth and Silence - the first emanation"
                },
                { 
                    name: "Nous & Aletheia", 
                    distance: 5, 
                    size: 1.2, 
                    color: 0x4169E1, 
                    description: "Mind and Truth"
                },
                { 
                    name: "Logos & Zoe", 
                    distance: 7, 
                    size: 1.0, 
                    color: 0x32CD32, 
                    description: "Word and Life"
                },
                { 
                    name: "Anthropos & Ecclesia", 
                    distance: 9, 
                    size: 0.8, 
                    color: 0xFF69B4, 
                    description: "Human and Church"
                },
                { 
                    name: "Sophia", 
                    distance: 11, 
                    size: 0.6, 
                    color: 0x9370DB, 
                    description: "Wisdom - the fallen aeon"
                },
                { 
                    name: "Material World", 
                    distance: 13, 
                    size: 0.4, 
                    color: 0x8B4513, 
                    description: "The created world of matter and suffering"
                }
            ];

            const spheres = [];
            const connections = [];

            // Create spheres for each level
            cosmologyLevels.forEach((level, index) => {
                const geometry = new THREE.SphereGeometry(level.size, 32, 32);
                const material = new THREE.MeshBasicMaterial({ 
                    color: level.color, 
                    transparent: true, 
                    opacity: 0.8,
                    wireframe: false
                });
                const sphere = new THREE.Mesh(geometry, material);
                sphere.position.set(0, 0, -level.distance);
                sphere.userData = level;
                spheres.push(sphere);
                scene.add(sphere);

                // Add glow effect
                const glowGeometry = new THREE.SphereGeometry(level.size * 1.2, 32, 32);
                const glowMaterial = new THREE.MeshBasicMaterial({
                    color: level.color,
                    transparent: true,
                    opacity: 0.2,
                    side: THREE.BackSide
                });
                const glow = new THREE.Mesh(glowGeometry, glowMaterial);
                glow.position.copy(sphere.position);
                scene.add(glow);

                // Add connections
                if (index > 0) {
                    const points = [
                        new THREE.Vector3(0, 0, -cosmologyLevels[index-1].distance),
                        new THREE.Vector3(0, 0, -level.distance)
                    ];
                    const connectionGeometry = new THREE.BufferGeometry().setFromPoints(points);
                    const connectionMaterial = new THREE.LineBasicMaterial({ 
                        color: 0xFFFFFF, 
                        transparent: true, 
                        opacity: 0.3 
                    });
                    const connection = new THREE.Line(connectionGeometry, connectionMaterial);
                    connections.push(connection);
                    scene.add(connection);
                }
            });

            // Animation variables
            let emanationPhase = 0;
            let isEmanating = false;
            let emanationSpeed = 1;
            let showingOpposites = false;

            // Add emanation level indicator
            const levelIndicator = document.createElement('div');
            levelIndicator.className = 'emanation-level';
            levelIndicator.textContent = 'Pleroma State';
            container.appendChild(levelIndicator);

            // Add info panel
            const infoPanel = document.createElement('div');
            infoPanel.className = 'aeon-info';
            container.appendChild(infoPanel);

            function updateEmanation(phase) {
                emanationPhase = Math.max(0, Math.min(phase, cosmologyLevels.length - 1));
                
                spheres.forEach((sphere, index) => {
                    if (index <= emanationPhase) {
                        sphere.visible = true;
                        sphere.material.opacity = 0.8;
                        
                        // Animate appearance
                        const scale = 1 + Math.sin(Date.now() * 0.002 + index) * 0.1;
                        sphere.scale.set(scale, scale, scale);
                    } else {
                        sphere.visible = false;
                    }
                });

                connections.forEach((connection, index) => {
                    connection.visible = index < emanationPhase;
                });

                // Update level indicator
                const currentLevel = cosmologyLevels[Math.floor(emanationPhase)] || cosmologyLevels[0];
                levelIndicator.textContent = currentLevel.name;

                // Update info panel
                infoPanel.innerHTML = `
                    <h4>${currentLevel.name}</h4>
                    <p>${currentLevel.description}</p>
                    <small>Emanation Level: ${Math.floor(emanationPhase) + 1}/${cosmologyLevels.length}</small>
                `;
                infoPanel.classList.add('visible');
            }

            function animateEmanation() {
                if (isEmanating) {
                    emanationPhase += 0.02 * emanationSpeed;
                    if (emanationPhase >= cosmologyLevels.length - 1) {
                        emanationPhase = cosmologyLevels.length - 1;
                        isEmanating = false;
                    }
                    updateEmanation(emanationPhase);
                }
                
                // Rotate camera around the cosmology
                const time = Date.now() * 0.0005;
                camera.position.x = Math.sin(time) * 20;
                camera.position.z = Math.cos(time) * 20;
                camera.lookAt(0, 0, -6);
                
                renderer.render(scene, camera);
                requestAnimationFrame(animateEmanation);
            }

            // Controls
            document.getElementById('start-emanation').addEventListener('click', () => {
                isEmanating = true;
                emanationPhase = 0;
            });

            document.getElementById('reverse-emanation').addEventListener('click', () => {
                isEmanating = false;
                if (emanationPhase > 0) {
                    const reverseInterval = setInterval(() => {
                        emanationPhase -= 0.1;
                        updateEmanation(emanationPhase);
                        if (emanationPhase <= 0) {
                            clearInterval(reverseInterval);
                        }
                    }, 50);
                }
            });

            document.getElementById('pause-emanation').addEventListener('click', () => {
                isEmanating = false;
            });

            document.getElementById('reset-cosmology').addEventListener('click', () => {
                isEmanating = false;
                emanationPhase = 0;
                updateEmanation(0);
            });

            document.getElementById('emanation-speed').addEventListener('input', (e) => {
                emanationSpeed = parseFloat(e.target.value);
            });

            document.getElementById('show-aeon-names').addEventListener('click', () => {
                // Add text labels to spheres
                spheres.forEach((sphere, index) => {
                    if (!sphere.userData.label) {
                        const canvas = document.createElement('canvas');
                        const context = canvas.getContext('2d');
                        canvas.width = 256;
                        canvas.height = 64;
                        context.fillStyle = 'white';
                        context.font = '24px Arial';
                        context.textAlign = 'center';
                        context.fillText(sphere.userData.name, 128, 40);

                        const texture = new THREE.CanvasTexture(canvas);
                        const spriteMaterial = new THREE.SpriteMaterial({ map: texture });
                        const sprite = new THREE.Sprite(spriteMaterial);
                        sprite.position.copy(sphere.position);
                        sprite.position.y += sphere.userData.size + 1;
                        sprite.scale.set(2, 0.5, 1);
                        scene.add(sprite);
                        sphere.userData.label = sprite;
                    }
                });
            });

            document.getElementById('highlight-sophia').addEventListener('click', () => {
                const sophiaIndex = cosmologyLevels.findIndex(level => level.name === 'Sophia');
                if (sophiaIndex !== -1) {
                    spheres[sophiaIndex].material.color.setHex(0xFF0000);
                    spheres[sophiaIndex].material.emissive.setHex(0x440000);
                    
                    // Reset after 3 seconds
                    setTimeout(() => {
                        spheres[sophiaIndex].material.color.setHex(cosmologyLevels[sophiaIndex].color);
                        spheres[sophiaIndex].material.emissive.setHex(0x000000);
                    }, 3000);
                }
            });

            document.getElementById('show-opposites').addEventListener('click', () => {
                showingOpposites = !showingOpposites;
                
                if (showingOpposites) {
                    // Create pairs showing opposites
                    spheres.forEach((sphere, index) => {
                        if (index > 0 && index < spheres.length - 1) {
                            // Create opposing sphere
                            const oppositeGeometry = new THREE.SphereGeometry(sphere.userData.size * 0.7, 16, 16);
                            const oppositeMaterial = new THREE.MeshBasicMaterial({
                                color: ~sphere.userData.color & 0xFFFFFF,
                                transparent: true,
                                opacity: 0.5,
                                wireframe: true
                            });
                            const oppositeSphere = new THREE.Mesh(oppositeGeometry, oppositeMaterial);
                            oppositeSphere.position.copy(sphere.position);
                            oppositeSphere.position.x += sphere.userData.size * 2;
                            scene.add(oppositeSphere);
                            sphere.userData.opposite = oppositeSphere;
                        }
                    });
                } else {
                    // Remove opposite spheres
                    spheres.forEach(sphere => {
                        if (sphere.userData.opposite) {
                            scene.remove(sphere.userData.opposite);
                            delete sphere.userData.opposite;
                        }
                    });
                }
            });

            // Initialize
            updateEmanation(0);
            animateEmanation();
        });

        // Sophia's Fall Visualization
        vizLoader.lazyLoad('sophia-fall', function(container) {
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, container.offsetWidth / container.offsetHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });
            
            renderer.setSize(container.offsetWidth, container.offsetHeight);
            renderer.setClearColor(0x000011, 1);
            container.appendChild(renderer.domElement);

            camera.position.set(0, 10, 20);
            camera.lookAt(0, 0, 0);

            // Create Sophia
            const sophiaGeometry = new THREE.SphereGeometry(1, 32, 32);
            const sophiaMaterial = new THREE.MeshBasicMaterial({ 
                color: 0x9370DB, 
                transparent: true, 
                opacity: 0.8 
            });
            const sophia = new THREE.Mesh(sophiaGeometry, sophiaMaterial);
            sophia.position.set(0, 15, 0);
            scene.add(sophia);

            // Create Pleroma (heavenly realm)
            const pleromaGeometry = new THREE.PlaneGeometry(30, 5);
            const pleromaMaterial = new THREE.MeshBasicMaterial({ 
                color: 0xFFD700, 
                transparent: true, 
                opacity: 0.3 
            });
            const pleroma = new THREE.Mesh(pleromaGeometry, pleromaMaterial);
            pleroma.position.set(0, 15, -5);
            scene.add(pleroma);

            // Create material world (bottom)
            const materialGeometry = new THREE.PlaneGeometry(30, 5);
            const materialMaterial = new THREE.MeshBasicMaterial({ 
                color: 0x8B4513, 
                transparent: true, 
                opacity: 0.3 
            });
            const materialWorld = new THREE.Mesh(materialGeometry, materialMaterial);
            materialWorld.position.set(0, -15, -5);
            scene.add(materialWorld);

            // Create particle trail
            const particles = [];
            for (let i = 0; i < 100; i++) {
                const particleGeometry = new THREE.SphereGeometry(0.1, 8, 8);
                const particleMaterial = new THREE.MeshBasicMaterial({ 
                    color: 0x9370DB, 
                    transparent: true, 
                    opacity: 0.6 
                });
                const particle = new THREE.Mesh(particleGeometry, particleMaterial);
                particle.visible = false;
                particles.push(particle);
                scene.add(particle);
            }

            let fallAnimation = {
                active: false,
                progress: 0,
                speed: 0.01
            };

            function animateFall() {
                if (fallAnimation.active) {
                    fallAnimation.progress += fallAnimation.speed;
                    
                    // Move Sophia down
                    const fallProgress = Math.min(fallAnimation.progress, 1);
                    sophia.position.y = 15 - (30 * fallProgress);
                    sophia.position.x = Math.sin(fallProgress * Math.PI * 4) * 5; // Spiral motion
                    
                    // Show particle trail
                    particles.forEach((particle, index) => {
                        if (index < fallProgress * particles.length) {
                            particle.visible = true;
                            const trailProgress = (index / particles.length);
                            particle.position.y = 15 - (30 * trailProgress);
                            particle.position.x = Math.sin(trailProgress * Math.PI * 4) * 5;
                            particle.position.z = Math.random() * 2 - 1;
                        }
                    });
                    
                    if (fallAnimation.progress >= 1) {
                        fallAnimation.active = false;
                        // Create demiurge
                        createDemiurge();
                    }
                }
                
                renderer.render(scene, camera);
                requestAnimationFrame(animateFall);
            }

            function createDemiurge() {
                const demiurgeGeometry = new THREE.OctahedronGeometry(1.5);
                const demiurgeMaterial = new THREE.MeshBasicMaterial({ 
                    color: 0xFF4500, 
                    transparent: true, 
                    opacity: 0.7,
                    wireframe: true
                });
                const demiurge = new THREE.Mesh(demiurgeGeometry, demiurgeMaterial);
                demiurge.position.set(5, -10, 0);
                scene.add(demiurge);
                
                // Animate demiurge
                function animateDemiurge() {
                    demiurge.rotation.x += 0.01;
                    demiurge.rotation.y += 0.01;
                    requestAnimationFrame(animateDemiurge);
                }
                animateDemiurge();
            }

            // Controls
            document.getElementById('play-sophia-fall').addEventListener('click', () => {
                fallAnimation.active = true;
                fallAnimation.progress = 0;
                sophia.position.set(0, 15, 0);
                particles.forEach(p => p.visible = false);
            });

            document.getElementById('show-demiurge').addEventListener('click', () => {
                createDemiurge();
            });

            document.getElementById('restart-sophia').addEventListener('click', () => {
                // Reset everything
                sophia.position.set(0, 15, 0);
                particles.forEach(p => p.visible = false);
                fallAnimation.progress = 0;
                fallAnimation.active = false;
                
                // Remove demiurge if exists
                const demiurge = scene.getObjectByName('demiurge');
                if (demiurge) scene.remove(demiurge);
            });

            animateFall();
        });

    </script>

    <section class="chapter-content" data-chapter-contract-root data-chapter-id="ch7" data-variant="enhanced"></section>
    <script type="module" src="../../assets/js/chapter-content-contract.js"></script>
</body>
</html>