<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chapter 3 - The Syzygy: Anima and Animus - Aion</title>
    <link rel="stylesheet" href="/styles/full-width.css">
    <style>
        /* Override full-width.css conflicts */
        body {
            margin-left: 0 !important;
        }
        
        /* Ensure main content wrapper exists */
        .main-content {
            margin-left: 250px;
            transition: margin-left 0.3s ease;
            padding: 0;
        }
        
        .main-content.full-width {
            margin-left: 0;
        }
        
        @media (max-width: 768px) {
            .main-content {
                margin-left: 0;
            }
        }
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: Georgia, serif;
            background: #000;
            color: #fff;
            line-height: 1.8;
        }
        
        /* Chapter Header */
        .chapter-header {
            padding: 4rem 2rem;
            text-align: center;
            background: linear-gradient(180deg, rgba(212, 175, 55, 0.1) 0%, transparent 100%);
            border-bottom: 1px solid #333;
        }
        
        .chapter-number {
            font-size: 1.2rem;
            color: #D4AF37;
            letter-spacing: 0.3em;
            text-transform: uppercase;
            margin-bottom: 1rem;
        }
        
        .chapter-title {
            font-size: 3rem;
            font-weight: 300;
            color: #fff;
            margin-bottom: 2rem;
        }
        
        .chapter-summary {
            max-width: 800px;
            margin: 0 auto;
            font-size: 1.3rem;
            color: #ccc;
            font-style: italic;
        }
        
        /* Chapter Content */
        .chapter-content {
            width: 100%;
            margin: 0 auto;
            padding: 4rem;
        }
        
        .section {
            margin-bottom: 3rem;
        }
        
        .section h2 {
            font-size: 2rem;
            color: #D4AF37;
            margin-bottom: 1.5rem;
            font-weight: 300;
        }
        
        .section p {
            font-size: 1.1rem;
            color: #ddd;
            margin-bottom: 1.5rem;
        }
        
        .quote-box {
            background: rgba(212, 175, 55, 0.05);
            border-left: 4px solid #D4AF37;
            padding: 1.5rem;
            margin: 2rem 0;
            font-style: italic;
        }
        
        .quote-box cite {
            display: block;
            margin-top: 1rem;
            color: #888;
            font-style: normal;
            text-align: right;
        }
        
        /* Visualization Container */
        .viz-container {
            margin: 3rem 0;
            padding: 0;
            background: #0a0a0a;
            border-radius: 12px;
            overflow: hidden;
            border: 1px solid rgba(212, 175, 55, 0.2);
        }
        
        .viz-container h3 {
            background: rgba(212, 175, 55, 0.1);
            color: #D4AF37;
            padding: 1rem;
            margin: 0;
            font-size: 1.3rem;
            font-weight: 300;
            text-align: center;
            border-bottom: 1px solid rgba(212, 175, 55, 0.2);
        }
        
        /* Chapter Navigation */
        .chapter-nav {
            width: 100%;
            margin: 0 auto;
            padding: 3rem 4rem;
            display: flex;
            justify-content: space-between;
            border-top: 1px solid #333;
        }
        
        .nav-link {
            color: #D4AF37;
            text-decoration: none;
            font-size: 1.1rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s ease;
        }
        
        .nav-link:hover {
            transform: translateX(5px);
        }
        
        .nav-link.prev:hover {
            transform: translateX(-5px);
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .chapter-title {
                font-size: 2rem;
            }
            
            .chapter-summary {
                font-size: 1.1rem;
            }
            
            .section h2 {
                font-size: 1.5rem;
            }
            
            .chapter-content {
                padding: 4rem 2rem;
            }
            
            .chapter-nav {
                padding: 3rem 2rem;
            }
        }
    </style>
</head>
<body>
    <!-- Chapter Header -->
    <header class="chapter-header">
        <div class="chapter-number">Chapter 3</div>
        <h1 class="chapter-title">The Syzygy: Anima and Animus</h1>
        <p class="chapter-summary">The contrasexual archetypes and the soul's true partner</p>
    </header>
    
    <!-- Chapter Content -->
    <main class="chapter-content">
        <section class="section">
            <h2>Overview</h2>
            <p>The syzygy represents one of Jung's most profound insights: within every man lives a feminine soul-image (anima), and within every woman lives a masculine soul-image (animus). These contrasexual archetypes serve as bridges to the unconscious and guides to the deeper Self.</p>
            <p>The term "syzygy" comes from astronomy, meaning a conjunction of celestial bodies. Jung uses it to describe the pairing of masculine and feminine principles within the psyche - a divine marriage that must occur internally for wholeness to be achieved.</p>
        </section>
        
        <!-- Visualization 1: The Syzygy Concept -->
        <div class="viz-container">
            <h3>The Syzygy: Inner Masculine and Feminine</h3>
            <div id="syzygy-viz" style="width: 100%; height: 500px; position: relative;">
                <svg id="syzygy-svg" style="width: 100%; height: 100%;"></svg>
            </div>
        </div>
        
        <section class="section">
            <h2>Key Concepts</h2>
            <p><strong>The Anima:</strong> In men, the anima appears as a feminine figure who embodies Eros - relatedness, emotion, and the irrational. She can manifest as mother, sister, beloved, or goddess, leading a man to his own soul.</p>
            <p><strong>The Animus:</strong> In women, the animus appears as a masculine figure embodying Logos - rationality, meaning, and spiritual purpose. He often appears as a group of men, representing collective male authority.</p>
            <p><strong>Projection in Relationships:</strong> We unconsciously project these inner figures onto real people, especially romantic partners. This creates the mysterious attraction and "falling in love" experience, but also leads to disappointment when the projection doesn't match reality.</p>
        </section>
        
        <div class="quote-box">
            "The meeting with the anima/animus is like the meeting with the 'Thou' which is at the same time the 'not-I' in ourselves."
            <cite>- C.G. Jung, Aion</cite>
        </div>
        
        <!-- Visualization 2: Anima Development Stages -->
        <div class="viz-container">
            <h3>The Four Stages of Anima Development</h3>
            <div id="anima-stages-viz" style="width: 100%; height: 600px; position: relative;">
                <div id="anima-container" style="width: 100%; height: 100%;"></div>
            </div>
        </div>
        
        <!-- Visualization 3: Interactive Constellation -->
        <div class="viz-container">
            <h3>Archetypal Constellation Network</h3>
            <iframe 
                src="/src/visualizations/constellation/anima-animus-demo.html" 
                style="width: 100%; height: 700px; border: none;"
                title="Anima/Animus Constellation"
                sandbox="allow-scripts allow-same-origin">
            </iframe>
        </div>
        
        <section class="section">
            <h2>The Inner Marriage</h2>
            <p>The ultimate goal is not to be possessed by these figures, but to establish a conscious relationship with them. This inner marriage - the coniunctio or hieros gamos - represents a crucial stage in individuation.</p>
            <p>When we withdraw our projections and recognize these as parts of our own psyche, we gain access to their wisdom and energy. The anima becomes a guide to the feeling realm and creativity; the animus to clarity and spiritual meaning.</p>
        </section>
        
        <!-- Visualization 4: Projection Dynamics -->
        <div class="viz-container">
            <h3>Relationship Projections and Withdrawals</h3>
            <div id="projection-dynamics-viz" style="width: 100%; height: 500px; position: relative;">
                <canvas id="projection-canvas" style="width: 100%; height: 100%;"></canvas>
            </div>
        </div>
        
        <section class="section">
            <h2>Historical Manifestations</h2>
            <p>Jung traced anima and animus figures throughout history - in mythology, literature, and art. From Dante's Beatrice to Goethe's eternal feminine, from Helen of Troy to the Virgin Mary, these figures represent humanity's encounter with the soul.</p>
            <p>Understanding these projections helps us recognize when we're relating to the inner image rather than the actual person, leading to more authentic relationships.</p>
        </section>
        
        <!-- Visualization 5: The Inner Marriage -->
        <div class="viz-container">
            <h3>The Alchemical Coniunctio</h3>
            <div id="coniunctio-viz" style="width: 100%; height: 500px; position: relative;">
                <svg id="coniunctio-svg" style="width: 100%; height: 100%;"></svg>
            </div>
        </div>
    </main>
    
    <!-- Chapter Navigation -->
    <nav class="chapter-nav">
        <a href="/chapters/chapter-2.html" class="nav-link prev">
            ← Chapter 2: The Shadow
        </a>
        <a href="/chapters/chapter-4.html" class="nav-link next">
            Chapter 4: The Self →
        </a>
    </nav>
    
    <script src="/components/navigation.js"></script>
    <script src="/js/ensure-viz-load.js"></script>
    
    <!-- Visualization Scripts -->
    <script>
        // Visualization 1: The Syzygy Concept
        window.initializeVisualization(function() {
            const svg = document.getElementById('syzygy-svg');
            const width = 800;
            const height = 500;
            svg.setAttribute('viewBox', `0 0 ${width} ${height}`);
            
            // Create gradients
            const defs = document.createElementNS('http://www.w3.org/2000/svg', 'defs');
            
            // Anima gradient
            const animaGrad = document.createElementNS('http://www.w3.org/2000/svg', 'radialGradient');
            animaGrad.setAttribute('id', 'animaGradient');
            animaGrad.innerHTML = `
                <stop offset="0%" style="stop-color:#FF69B4;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#FF1493;stop-opacity:0.3" />
            `;
            defs.appendChild(animaGrad);
            
            // Animus gradient
            const animusGrad = document.createElementNS('http://www.w3.org/2000/svg', 'radialGradient');
            animusGrad.setAttribute('id', 'animusGradient');
            animusGrad.innerHTML = `
                <stop offset="0%" style="stop-color:#4169E1;stop-opacity:1" />
                <stop offset="100%" style="stop-color:#000080;stop-opacity:0.3" />
            `;
            defs.appendChild(animusGrad);
            
            svg.appendChild(defs);
            
            // Background circle (psyche)
            const psyche = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
            psyche.setAttribute('cx', width/2);
            psyche.setAttribute('cy', height/2);
            psyche.setAttribute('r', 200);
            psyche.setAttribute('fill', 'none');
            psyche.setAttribute('stroke', '#333');
            psyche.setAttribute('stroke-width', '2');
            svg.appendChild(psyche);
            
            // Anima side
            const animaGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');
            animaGroup.innerHTML = `
                <path d="M ${width/2} ${height/2 - 200} A 200 200 0 0 0 ${width/2} ${height/2 + 200}" 
                      fill="url(#animaGradient)" opacity="0.5"/>
                <text x="${width/2 - 100}" y="${height/2}" text-anchor="middle" fill="#FF69B4" font-size="20">ANIMA</text>
                <text x="${width/2 - 100}" y="${height/2 + 30}" text-anchor="middle" fill="#FF69B4" font-size="14" opacity="0.8">Eros</text>
                <text x="${width/2 - 100}" y="${height/2 + 50}" text-anchor="middle" fill="#FF69B4" font-size="12" opacity="0.6">Feeling</text>
                <text x="${width/2 - 100}" y="${height/2 + 70}" text-anchor="middle" fill="#FF69B4" font-size="12" opacity="0.6">Relatedness</text>
            `;
            svg.appendChild(animaGroup);
            
            // Animus side
            const animusGroup = document.createElementNS('http://www.w3.org/2000/svg', 'g');
            animusGroup.innerHTML = `
                <path d="M ${width/2} ${height/2 - 200} A 200 200 0 0 1 ${width/2} ${height/2 + 200}" 
                      fill="url(#animusGradient)" opacity="0.5"/>
                <text x="${width/2 + 100}" y="${height/2}" text-anchor="middle" fill="#4169E1" font-size="20">ANIMUS</text>
                <text x="${width/2 + 100}" y="${height/2 + 30}" text-anchor="middle" fill="#4169E1" font-size="14" opacity="0.8">Logos</text>
                <text x="${width/2 + 100}" y="${height/2 + 50}" text-anchor="middle" fill="#4169E1" font-size="12" opacity="0.6">Thinking</text>
                <text x="${width/2 + 100}" y="${height/2 + 70}" text-anchor="middle" fill="#4169E1" font-size="12" opacity="0.6">Meaning</text>
            `;
            svg.appendChild(animusGroup);
            
            // Center line
            const centerLine = document.createElementNS('http://www.w3.org/2000/svg', 'line');
            centerLine.setAttribute('x1', width/2);
            centerLine.setAttribute('y1', height/2 - 200);
            centerLine.setAttribute('x2', width/2);
            centerLine.setAttribute('y2', height/2 + 200);
            centerLine.setAttribute('stroke', '#D4AF37');
            centerLine.setAttribute('stroke-width', '2');
            centerLine.setAttribute('stroke-dasharray', '5,5');
            svg.appendChild(centerLine);
            
            // Center point
            const center = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
            center.setAttribute('cx', width/2);
            center.setAttribute('cy', height/2);
            center.setAttribute('r', 10);
            center.setAttribute('fill', '#D4AF37');
            svg.appendChild(center);
            
            // Labels
            const title = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            title.setAttribute('x', width/2);
            title.setAttribute('y', 50);
            title.setAttribute('text-anchor', 'middle');
            title.setAttribute('fill', '#D4AF37');
            title.setAttribute('font-size', '18');
            title.textContent = 'The Divine Syzygy Within';
            svg.appendChild(title);
            
            // Rotating animation
            let rotation = 0;
            function rotate() {
                rotation += 0.2;
                animaGroup.setAttribute('transform', `rotate(${rotation}, ${width/2}, ${height/2})`);
                animusGroup.setAttribute('transform', `rotate(${rotation}, ${width/2}, ${height/2})`);
                requestAnimationFrame(rotate);
            }
            rotate();
        });
        
        // Visualization 2: Anima Development Stages
        window.initializeVisualization(function() {
            const container = document.getElementById('anima-container');
            container.innerHTML = `
                <svg viewBox="0 0 800 600" style="width: 100%; height: 100%;">
                    <defs>
                        <linearGradient id="evolutionGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                            <stop offset="0%" style="stop-color:#8B4513;stop-opacity:1" />
                            <stop offset="33%" style="stop-color:#FF69B4;stop-opacity:1" />
                            <stop offset="66%" style="stop-color:#FFD700;stop-opacity:1" />
                            <stop offset="100%" style="stop-color:#FFFFFF;stop-opacity:1" />
                        </linearGradient>
                    </defs>
                    
                    <!-- Evolution path -->
                    <rect x="50" y="280" width="700" height="40" fill="url(#evolutionGradient)" opacity="0.3" rx="20"/>
                    
                    <!-- Stage 1: Eve -->
                    <g transform="translate(100, 200)">
                        <circle cx="0" cy="0" r="60" fill="#8B4513" opacity="0.7"/>
                        <text x="0" y="0" text-anchor="middle" fill="#fff" font-size="16" font-weight="bold">EVE</text>
                        <text x="0" y="20" text-anchor="middle" fill="#fff" font-size="12">Biological</text>
                        <text x="0" y="-100" text-anchor="middle" fill="#8B4513" font-size="14">Stage 1</text>
                        <text x="0" y="-80" text-anchor="middle" fill="#aaa" font-size="12">Mother, nurturer</text>
                        <text x="0" y="-60" text-anchor="middle" fill="#aaa" font-size="12">Instinctual feminine</text>
                    </g>
                    
                    <!-- Stage 2: Helen -->
                    <g transform="translate(300, 200)">
                        <circle cx="0" cy="0" r="60" fill="#FF69B4" opacity="0.7"/>
                        <text x="0" y="0" text-anchor="middle" fill="#fff" font-size="16" font-weight="bold">HELEN</text>
                        <text x="0" y="20" text-anchor="middle" fill="#fff" font-size="12">Romantic</text>
                        <text x="0" y="-100" text-anchor="middle" fill="#FF69B4" font-size="14">Stage 2</text>
                        <text x="0" y="-80" text-anchor="middle" fill="#aaa" font-size="12">Beauty, desire</text>
                        <text x="0" y="-60" text-anchor="middle" fill="#aaa" font-size="12">Sexual attraction</text>
                    </g>
                    
                    <!-- Stage 3: Mary -->
                    <g transform="translate(500, 200)">
                        <circle cx="0" cy="0" r="60" fill="#FFD700" opacity="0.7"/>
                        <text x="0" y="0" text-anchor="middle" fill="#000" font-size="16" font-weight="bold">MARY</text>
                        <text x="0" y="20" text-anchor="middle" fill="#000" font-size="12">Spiritual</text>
                        <text x="0" y="-100" text-anchor="middle" fill="#FFD700" font-size="14">Stage 3</text>
                        <text x="0" y="-80" text-anchor="middle" fill="#aaa" font-size="12">Virgin, pure</text>
                        <text x="0" y="-60" text-anchor="middle" fill="#aaa" font-size="12">Spiritual devotion</text>
                    </g>
                    
                    <!-- Stage 4: Sophia -->
                    <g transform="translate(700, 200)">
                        <circle cx="0" cy="0" r="60" fill="#FFFFFF" opacity="0.9"/>
                        <text x="0" y="0" text-anchor="middle" fill="#000" font-size="16" font-weight="bold">SOPHIA</text>
                        <text x="0" y="20" text-anchor="middle" fill="#000" font-size="12">Wisdom</text>
                        <text x="0" y="-100" text-anchor="middle" fill="#FFFFFF" font-size="14">Stage 4</text>
                        <text x="0" y="-80" text-anchor="middle" fill="#aaa" font-size="12">Divine wisdom</text>
                        <text x="0" y="-60" text-anchor="middle" fill="#aaa" font-size="12">Transcendent guide</text>
                    </g>
                    
                    <!-- Arrows -->
                    <path d="M 160 200 L 240 200" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
                    <path d="M 360 200 L 440 200" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
                    <path d="M 560 200 L 640 200" stroke="#666" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
                    
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#666"/>
                        </marker>
                    </defs>
                    
                    <!-- Title and description -->
                    <text x="400" y="50" text-anchor="middle" fill="#D4AF37" font-size="20">Evolution of the Anima</text>
                    <text x="400" y="450" text-anchor="middle" fill="#888" font-size="14">From biological to spiritual: The four stages of anima development in a man's psyche</text>
                    <text x="400" y="470" text-anchor="middle" fill="#888" font-size="12">Each stage represents a deepening relationship with the feminine principle</text>
                </svg>
            `;
        });
        
        // Visualization 4: Projection Dynamics
        window.initializeVisualization(function() {
            const canvas = document.getElementById('projection-canvas');
            const ctx = canvas.getContext('2d');
            
            function resizeCanvas() {
                canvas.width = canvas.offsetWidth;
                canvas.height = canvas.offsetHeight;
            }
            resizeCanvas();
            window.addEventListener('resize', resizeCanvas);
            
            class Particle {
                constructor(x, y, type) {
                    this.x = x;
                    this.y = y;
                    this.type = type; // 'anima' or 'animus'
                    this.size = 5;
                    this.speed = 2;
                    this.angle = Math.random() * Math.PI * 2;
                    this.projectionTarget = null;
                    this.returning = false;
                }
                
                update() {
                    if (this.projectionTarget && !this.returning) {
                        // Move toward target
                        const dx = this.projectionTarget.x - this.x;
                        const dy = this.projectionTarget.y - this.y;
                        const dist = Math.sqrt(dx * dx + dy * dy);
                        
                        if (dist > 5) {
                            this.x += (dx / dist) * this.speed;
                            this.y += (dy / dist) * this.speed;
                        } else {
                            // Start returning after reaching target
                            setTimeout(() => {
                                this.returning = true;
                            }, 1000);
                        }
                    } else if (this.returning) {
                        // Return to source
                        const centerX = canvas.width / 2;
                        const centerY = canvas.height / 2;
                        const dx = centerX - this.x;
                        const dy = centerY - this.y;
                        const dist = Math.sqrt(dx * dx + dy * dy);
                        
                        if (dist > 50) {
                            this.x += (dx / dist) * this.speed;
                            this.y += (dy / dist) * this.speed;
                        } else {
                            this.projectionTarget = null;
                            this.returning = false;
                        }
                    } else {
                        // Orbit around center
                        this.angle += 0.02;
                        const radius = 50;
                        const centerX = canvas.width / 2;
                        const centerY = canvas.height / 2;
                        this.x = centerX + Math.cos(this.angle) * radius;
                        this.y = centerY + Math.sin(this.angle) * radius;
                    }
                }
                
                draw(ctx) {
                    ctx.beginPath();
                    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                    ctx.fillStyle = this.type === 'anima' ? '#FF69B4' : '#4169E1';
                    ctx.fill();
                    
                    if (this.projectionTarget) {
                        ctx.strokeStyle = this.type === 'anima' ? 'rgba(255, 105, 180, 0.3)' : 'rgba(65, 105, 225, 0.3)';
                        ctx.lineWidth = 1;
                        ctx.beginPath();
                        ctx.moveTo(this.x, this.y);
                        ctx.lineTo(this.projectionTarget.x, this.projectionTarget.y);
                        ctx.stroke();
                    }
                }
            }
            
            const particles = [];
            const targets = [
                { x: 100, y: 100, label: 'Partner' },
                { x: canvas.width - 100, y: 100, label: 'Celebrity' },
                { x: 100, y: canvas.height - 100, label: 'Teacher' },
                { x: canvas.width - 100, y: canvas.height - 100, label: 'Friend' }
            ];
            
            // Create particles
            for (let i = 0; i < 8; i++) {
                particles.push(new Particle(
                    canvas.width / 2,
                    canvas.height / 2,
                    i < 4 ? 'anima' : 'animus'
                ));
            }
            
            // Randomly assign projections
            setInterval(() => {
                const particle = particles[Math.floor(Math.random() * particles.length)];
                if (!particle.projectionTarget && Math.random() > 0.5) {
                    particle.projectionTarget = targets[Math.floor(Math.random() * targets.length)];
                }
            }, 2000);
            
            function draw() {
                ctx.fillStyle = 'rgba(10, 10, 10, 0.1)';
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // Draw center (Self)
                ctx.beginPath();
                ctx.arc(canvas.width / 2, canvas.height / 2, 40, 0, Math.PI * 2);
                ctx.fillStyle = '#D4AF37';
                ctx.fill();
                ctx.fillStyle = '#000';
                ctx.font = 'bold 16px Georgia';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText('SELF', canvas.width / 2, canvas.height / 2);
                
                // Draw targets
                targets.forEach(target => {
                    ctx.beginPath();
                    ctx.arc(target.x, target.y, 30, 0, Math.PI * 2);
                    ctx.fillStyle = 'rgba(136, 136, 136, 0.3)';
                    ctx.fill();
                    ctx.fillStyle = '#888';
                    ctx.font = '12px Georgia';
                    ctx.fillText(target.label, target.x, target.y);
                });
                
                // Update and draw particles
                particles.forEach(particle => {
                    particle.update();
                    particle.draw(ctx);
                });
                
                // Legend
                ctx.fillStyle = '#FF69B4';
                ctx.fillRect(20, 20, 10, 10);
                ctx.fillStyle = '#888';
                ctx.font = '12px Georgia';
                ctx.textAlign = 'left';
                ctx.fillText('Anima projections', 35, 28);
                
                ctx.fillStyle = '#4169E1';
                ctx.fillRect(20, 40, 10, 10);
                ctx.fillStyle = '#888';
                ctx.fillText('Animus projections', 35, 48);
                
                // Title
                ctx.fillStyle = '#888';
                ctx.font = '14px Georgia';
                ctx.textAlign = 'center';
                ctx.fillText('Watch how we project our inner figures onto others, then withdraw them back to the Self', canvas.width / 2, canvas.height - 20);
                
                requestAnimationFrame(draw);
            }
            
            draw();
        });
        
        // Visualization 5: The Inner Marriage
        window.initializeVisualization(function() {
            const svg = document.getElementById('coniunctio-svg');
            const width = 800;
            const height = 500;
            svg.setAttribute('viewBox', `0 0 ${width} ${height}`);
            
            // Create the alchemical vessel
            const vessel = document.createElementNS('http://www.w3.org/2000/svg', 'g');
            vessel.innerHTML = `
                <ellipse cx="${width/2}" cy="${height/2 + 100}" rx="150" ry="50" fill="none" stroke="#D4AF37" stroke-width="3"/>
                <path d="M ${width/2 - 150} ${height/2 + 100} L ${width/2 - 150} ${height/2 - 100} 
                         Q ${width/2} ${height/2 - 150} ${width/2 + 150} ${height/2 - 100} 
                         L ${width/2 + 150} ${height/2 + 100}" 
                      fill="none" stroke="#D4AF37" stroke-width="3"/>
            `;
            svg.appendChild(vessel);
            
            // Sol (Sun/Masculine)
            const sol = document.createElementNS('http://www.w3.org/2000/svg', 'g');
            sol.setAttribute('id', 'sol');
            sol.innerHTML = `
                <circle cx="${width/2 - 50}" cy="${height/2}" r="40" fill="#FFD700" opacity="0.8"/>
                <text x="${width/2 - 50}" y="${height/2 + 5}" text-anchor="middle" fill="#000" font-size="16" font-weight="bold">SOL</text>
                <text x="${width/2 - 50}" y="${height/2 - 60}" text-anchor="middle" fill="#FFD700" font-size="12">☉</text>
            `;
            svg.appendChild(sol);
            
            // Luna (Moon/Feminine)
            const luna = document.createElementNS('http://www.w3.org/2000/svg', 'g');
            luna.setAttribute('id', 'luna');
            luna.innerHTML = `
                <circle cx="${width/2 + 50}" cy="${height/2}" r="40" fill="#C0C0C0" opacity="0.8"/>
                <text x="${width/2 + 50}" y="${height/2 + 5}" text-anchor="middle" fill="#000" font-size="16" font-weight="bold">LUNA</text>
                <text x="${width/2 + 50}" y="${height/2 - 60}" text-anchor="middle" fill="#C0C0C0" font-size="12">☽</text>
            `;
            svg.appendChild(luna);
            
            // Title
            const title = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            title.setAttribute('x', width/2);
            title.setAttribute('y', 50);
            title.setAttribute('text-anchor', 'middle');
            title.setAttribute('fill', '#D4AF37');
            title.setAttribute('font-size', '20');
            title.textContent = 'The Alchemical Wedding';
            svg.appendChild(title);
            
            // Description
            const desc = document.createElementNS('http://www.w3.org/2000/svg', 'text');
            desc.setAttribute('x', width/2);
            desc.setAttribute('y', height - 30);
            desc.setAttribute('text-anchor', 'middle');
            desc.setAttribute('fill', '#888');
            desc.setAttribute('font-size', '14');
            desc.textContent = 'The coniunctio: Integration of masculine and feminine principles within';
            svg.appendChild(desc);
            
            // Animate the conjunction
            let time = 0;
            function animateConiunctio() {
                time += 0.02;
                
                // Move sol and luna closer and farther
                const distance = 50 + Math.sin(time) * 30;
                sol.querySelector('circle').setAttribute('cx', width/2 - distance);
                sol.querySelector('text').setAttribute('x', width/2 - distance);
                sol.querySelectorAll('text')[1].setAttribute('x', width/2 - distance);
                
                luna.querySelector('circle').setAttribute('cx', width/2 + distance);
                luna.querySelector('text').setAttribute('x', width/2 + distance);
                luna.querySelectorAll('text')[1].setAttribute('x', width/2 + distance);
                
                // Create union effect when close
                if (distance < 30) {
                    if (!svg.querySelector('#union')) {
                        const union = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
                        union.setAttribute('id', 'union');
                        union.setAttribute('cx', width/2);
                        union.setAttribute('cy', height/2);
                        union.setAttribute('r', 60);
                        union.setAttribute('fill', '#D4AF37');
                        union.setAttribute('opacity', '0');
                        svg.insertBefore(union, sol);
                    }
                    const union = svg.querySelector('#union');
                    union.setAttribute('opacity', (30 - distance) / 30 * 0.5);
                } else {
                    const union = svg.querySelector('#union');
                    if (union) union.remove();
                }
                
                requestAnimationFrame(animateConiunctio);
            }
            animateConiunctio();
        });
    </script>
</body>
</html>