document.addEventListener('DOMContentLoaded',()=>{const isMainPage=!window.location.pathname.includes('chapter');if(isMainPage){if(!document.querySelector('.navigation')){createNavigation();}}setupPageTransitions();setupThemeToggle();});function createNavigation(){const nav=document.createElement('nav');nav.className='navigation';const currentPath=window.location.pathname;const isIndex=currentPath.endsWith('index.html')||currentPath.endsWith('/');const isChapters=currentPath.includes('chapters.html');const isTimeline=currentPath.includes('timeline.html');const isSymbols=currentPath.includes('symbols.html');const isAbout=currentPath.includes('about.html');nav.innerHTML=`<a href="index.html" class="nav-item ${isIndex?'active':''}">Home</a><a href="chapters.html" class="nav-item ${isChapters?'active':''}">Chapters</a><a href="timeline.html" class="nav-item ${isTimeline?'active':''}">Timeline</a><a href="symbols.html" class="nav-item ${isSymbols?'active':''}">Symbols</a><a href="about.html" class="nav-item ${isAbout?'active':''}">About</a>`;document.body.prepend(nav);}function createSidebar(){const sidebar=document.createElement('div');sidebar.className='sidebar collapsed';sidebar.innerHTML=`<div class="sidebar-header"><div class="sidebar-logo"><span class="logo-icon">â˜¯</span><span class="logo-text">Aion</span></div><button class="sidebar-toggle" aria-label="Toggle Sidebar"><svg width="20" height="20" viewBox="0 0 15 15" fill="none" xmlns="http:<path d="M2 4.5C2 4.22386 2.22386 4 2.5 4H12.5C12.7761 4 13 4.22386 13 4.5C13 4.77614 12.7761 5 12.5 5H2.5C2.22386 5 2 4.77614 2 4.5ZM2 7.5C2 7.22386 2.22386 7 2.5 7H12.5C12.7761 7 13 7.22386 13 7.5C13 7.77614 12.7761 8 12.5 8H2.5C2.22386 8 2 7.77614 2 7.5ZM2 10.5C2 10.2239 2.22386 10 2.5 10H12.5C12.7761 10 13 10.2239 13 10.5C13 10.7761 12.7761 11 12.5 11H2.5C2.22386 11 2 10.7761 2 10.5Z" fill="currentColor"></path></svg></button></div><nav class="sidebar-nav"><ul class="nav-list"><li class="nav-item ${window.location.pathname.endsWith('index.html')||window.location.pathname.endsWith('/')?'active':''}"><a href="index.html" class="nav-link"><svg width="20" height="20" viewBox="0 0 15 15" fill="none" xmlns="http:<span>Hub</span></a></li><li class="nav-item ${window.location.pathname.includes('ego.html')?'active':''}"><a href="ego.html" class="nav-link"><svg width="20" height="20" viewBox="0 0 15 15" fill="none" xmlns="http:<span>Ego</span></a></li><li class="nav-item ${window.location.pathname.includes('timeline.html')?'active':''}"><a href="timeline.html" class="nav-link"><svg width="20" height="20" viewBox="0 0 15 15" fill="none" xmlns="http:<span>Timeline</span></a></li><li class="nav-item ${window.location.pathname.includes('dynamics.html')?'active':''}"><a href="dynamics.html" class="nav-link"><svg width="20" height="20" viewBox="0 0 15 15" fill="none" xmlns="http:<span>Dynamics</span></a></li><li class="nav-item ${window.location.pathname.includes('profiles.html')?'active':''}"><a href="profiles.html" class="nav-link"><svg width="20" height="20" viewBox="0 0 15 15" fill="none" xmlns="http:<span>Profiles</span></a></li><li class="nav-item ${window.location.pathname.includes('integration.html')?'active':''}"><a href="integration.html" class="nav-link"><svg width="20" height="20" viewBox="0 0 15 15" fill="none" xmlns="http:<span>Integration</span></a></li><li class="nav-item ${window.location.pathname.includes('network.html')?'active':''}"><a href="network.html" class="nav-link"><svg width="20" height="20" viewBox="0 0 15 15" fill="none" xmlns="http:<span>Network</span></a></li></ul></nav><div class="sidebar-footer"><button class="theme-toggle" aria-label="Toggle dark theme"><svg class="sun-icon" width="20" height="20" viewBox="0 0 15 15" fill="none" xmlns="http:<svg class="moon-icon" width="20" height="20" viewBox="0 0 15 15" fill="none" xmlns="http:</button></div>`;document.body.prepend(sidebar);const content=document.querySelector('.container');if(content){const wrapper=document.createElement('div');wrapper.className='content-wrapper';content.parentNode.insertBefore(wrapper,content);wrapper.appendChild(content);}const sidebarToggle=sidebar.querySelector('.sidebar-toggle');if(sidebarToggle){sidebarToggle.addEventListener('click',toggleSidebar);}const themeToggle=sidebar.querySelector('.theme-toggle');if(themeToggle){themeToggle.addEventListener('click',toggleTheme);}}function toggleSidebar(){const sidebar=document.querySelector('.sidebar');if(sidebar){sidebar.classList.toggle('collapsed');const wrapper=document.querySelector('.content-wrapper');if(wrapper){wrapper.classList.toggle('sidebar-open',!sidebar.classList.contains('collapsed'));}}}function setupThemeToggle(){const savedTheme=localStorage.getItem('theme');const prefersDark=window.matchMedia('(prefers-color-scheme:dark)').matches;if(savedTheme==='dark'||(!savedTheme&&prefersDark)){document.documentElement.classList.add('dark');}const isDark=document.documentElement.classList.contains('dark');for(const el of document.querySelectorAll('.sun-icon')){el.style.display=isDark?'block':'none';}for(const el of document.querySelectorAll('.moon-icon')){el.style.display=isDark?'none':'block';}}function toggleTheme(){const isDark=document.documentElement.classList.toggle('dark');localStorage.setItem('theme',isDark?'dark':'light');for(const el of document.querySelectorAll('.sun-icon')){el.style.display=isDark?'block':'none';}for(const el of document.querySelectorAll('.moon-icon')){el.style.display=isDark?'none':'block';}}function setupPageTransitions(){document.body.classList.add('page-transition');document.addEventListener('click',e=>{const link=e.target.closest('a');if(!link)return;if(link.hostname===window.location.hostname&&(link.pathname.endsWith('.html')||link.pathname.endsWith('/'))){e.preventDefault();const href=link.href;document.body.classList.add('page-exit');setTimeout(()=>{window.location=href;},500);}});window.addEventListener('DOMContentLoaded',()=>{requestAnimationFrame(()=>{document.body.classList.remove('page-exit');document.body.classList.add('page-enter');setTimeout(()=>{document.body.classList.remove('page-enter');},500);});});window.addEventListener('pageshow',(event)=>{if(event.persisted){document.body.classList.remove('page-exit');document.body.classList.add('page-enter');setTimeout(()=>{document.body.classList.remove('page-enter');},500);}});}function handleInitialSidebarState(){const isMobile=window.innerWidth<768;const sidebar=document.querySelector('.sidebar');if(sidebar&&!isMobile){sidebar.classList.remove('collapsed');const wrapper=document.querySelector('.content-wrapper');if(wrapper){wrapper.classList.add('sidebar-open');}}window.addEventListener('resize',()=>{const isMobile=window.innerWidth<768;if(isMobile&&sidebar){sidebar.classList.add('collapsed');const wrapper=document.querySelector('.content-wrapper');if(wrapper){wrapper.classList.remove('sidebar-open');}}});}