class PerformanceMonitor{constructor(){this.metrics={loadTime:0,renderTime:0,memoryUsage:0,frameRate:0};this.frameCount=0;this.lastFrameTime=performance.now();this.enabled=false;this.element=null;}init(){this.element=document.createElement('div');this.element.className='perf-monitor';document.body.appendChild(this.element);this.startMonitoring();document.addEventListener('keydown',(e)=>{if(e.ctrlKey&&e.shiftKey&&e.key==='P'){this.toggle();}});}startMonitoring(){window.addEventListener('load',()=>{this.metrics.loadTime=performance.now();}ms`);});this.monitorFrameRate();if(performance.memory){setInterval(()=>{this.metrics.memoryUsage=performance.memory.usedJSHeapSize/1024/1024;},1000);}setInterval(()=>{this.updateDisplay();},500);}monitorFrameRate(){const measure=(timestamp)=>{this.frameCount++;const elapsed=timestamp-this.lastFrameTime;if(elapsed>=1000){this.metrics.frameRate=Math.round((this.frameCount*1000)/elapsed);this.frameCount=0;this.lastFrameTime=timestamp;}requestAnimationFrame(measure);};requestAnimationFrame(measure);}updateDisplay(){if(!this.enabled||!this.element)return;const memoryText=this.metrics.memoryUsage>0?`Memory:${this.metrics.memoryUsage.toFixed(1)}MB`:'Memory:N/A';this.element.innerHTML=`<div>Load:${this.metrics.loadTime.toFixed(0)}ms</div><div>FPS:${this.metrics.frameRate}</div><div>${memoryText}</div><div>WebGL:${window.OptimizedWebGLManager?.isInitialized?'Active':'Inactive'}</div>`;}toggle(){this.enabled=!this.enabled;this.element.classList.toggle('visible',this.enabled);}measureOperation(name,operation){const start=performance.now();const result=operation();const duration=performance.now()-start;}ms`);return result;}}document.addEventListener('DOMContentLoaded',()=>{window.performanceMonitor=new PerformanceMonitor();window.performanceMonitor.init();});